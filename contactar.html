<!DOCTYPE html>
<html lang="es">
<head>
    <!-- Google Tag Manager -->
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-PJ2GPLW');</script>
    <!-- End Google Tag Manager -->

    <!-- Google Tag Manager -->
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-5XHSZ4JZ');</script>
    <!-- End Google Tag Manager -->

    <!-- Facebook Pixel Code -->
    <script>
      !function(f,b,e,v,n,t,s)
      {if(f.fbq)return;n=f.fbq=function(){n.callMethod?
      n.callMethod.apply(n,arguments):n.queue.push(arguments)};
      if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
      n.queue=[];t=b.createElement(e);t.async=!0;
      t.src=v;s=b.getElementsByTagName(e)[0];
      s.parentNode.insertBefore(t,s)}(window, document,'script',
      'https://connect.facebook.net/en_US/fbevents.js');
      fbq('init', '480098396969829');
      fbq('track', 'PageView');
    </script>
    <noscript>
      <img height="1" width="1" style="display:none" 
           src="https://www.facebook.com/tr?id=480098396969829&ev=PageView&noscript=1"/>
    </noscript>
    <!-- End Facebook Pixel Code -->

    <!-- TikTok Pixel Base Code -->
    <script>
      !function (w, d, t) {
        w.TiktokAnalyticsObject = t;
        var ttq = w[t] = w[t] || [];
        ttq.methods = ["page", "track", "identify", "instances", "debug", "on", "off", "once", "ready", "alias", "group", "enableCookie", "disableCookie"];
        ttq.setAndDefer = function (t, e) {
          t[e] = function () {
            t.push([e].concat(Array.prototype.slice.call(arguments, 0)))
          }
        };
        for (var i = 0; i < ttq.methods.length; i++) ttq.setAndDefer(ttq, ttq.methods[i]);
        ttq.instance = function (t) {
          for (var e = ttq._i[t] || [], n = 0; n < ttq.methods.length; n++
          ) ttq.setAndDefer(e, ttq.methods[n]);
          return e
        };
        ttq.load = function (e, n) {
          var i = "https://analytics.tiktok.com/i18n/pixel/events.js";
          ttq._i = ttq._i || {};
          ttq._i[e] = [];
          ttq._i[e]._u = i;
          ttq._t = ttq._t || {};
          ttq._t[e] = +new Date;
          ttq._o = ttq._o || {};
          ttq._o[e] = n || {};
          var a = document.createElement("script");
          a.type = "text/javascript";
          a.async = !0;
          a.src = i + "?sdkid=" + e + "&lib=" + t;
          var s = document.getElementsByTagName("script")[0];
          s.parentNode.insertBefore(a, s)
        };
        ttq.load('D19H903C77U2P4BEJ3EG');  // ← Your Pixel ID here
        ttq.page();
      }(window, document, 'ttq');
    </script>

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Contactar - Bia Energy</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    
    <!-- Canvas Confetti -->
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.2/dist/confetti.browser.min.js"></script>
    
    <style>
        * {
            font-family: 'Inter', sans-serif;
        }
        
        body {
            margin: 0;
            padding: 0;
            overflow-x: hidden;
        }
        
        /* Glassmorphism styling */
        .glassmorphism {
            backdrop-filter: blur(12px);
            background: rgba(0, 0, 0, 0.4);
            border: 1px solid rgba(255, 255, 255, 0.12);
            box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.37);
        }
        
        /* Logo scroll animation - exactly like mobile version */
        .logo-container {
            overflow: hidden;
            width: 100%;
            max-width: 100%;
            mask-image: linear-gradient(to right, transparent, black 20%, black 80%, transparent);
            -webkit-mask-image: linear-gradient(to right, transparent, black 20%, black 80%, transparent);
        }
        
        .logo-scroll {
            display: flex;
            animation: scrollLogos 46s linear infinite;
            width: fit-content;
            gap: 3rem;
        }
        
        .logo-item {
            flex-shrink: 0;
            height: 2rem;
            display: flex;
            align-items: center;
        }
        
        .logo-item img {
            height: 2rem;
            width: auto;
            filter: brightness(0) saturate(100%) invert(88%) sepia(0%) saturate(0%) hue-rotate(180deg) brightness(105%) contrast(95%);
            opacity: 0.6;
        }
        
        /* Stacked review cards */
        .reviews-stack {
            position: relative;
            height: 200px;
            margin: 3rem 0;
        }
        
        .review-card {
            position: absolute;
            left: 0;
            right: 0;
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 1rem;
            padding: 1.5rem;
            transition: all 0.6s cubic-bezier(0.34, 1.56, 0.64, 1);
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.2);
        }
        
        .review-card.card-0 {
            top: 0;
            z-index: 30;
            transform: translateY(0) scale(1);
            opacity: 1;
        }
        
        .review-card.card-1 {
            top: 8px;
            z-index: 20;
            transform: translateY(0) scale(0.98);
            opacity: 0.7;
        }
        
        .review-card.card-2 {
            top: 16px;
            z-index: 10;
            transform: translateY(0) scale(0.96);
            opacity: 0.4;
        }
        
        .review-card.exiting {
            transform: translateY(-20px) scale(0.95);
            opacity: 0;
        }
        
        .company-subtitle {
            font-size: 0.875rem;
            color: #9ca3af;
            letter-spacing: 0.05em;
            margin-bottom: 1.5rem;
        }
        
        @keyframes scrollLogos {
            0% {
                transform: translateX(0);
            }
            100% {
                transform: translateX(-50%);
            }
        }
        
        /* Sticky logo at top */
        .sticky-logo {
            position: fixed;
            top: 1.5rem;
            left: 1.5rem;
            z-index: 1000;
        }
        
        /* Gradient button for CTA */
        .premium-gradient-button {
            background: linear-gradient(135deg, #08ddbc 0%, #17ffdb 100%);
            transition: all 0.3s ease;
            border: none;
            cursor: pointer;
        }
        
        .premium-gradient-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(8, 221, 188, 0.3);
        }
        
        /* Submit button - exact same styling as header CTA button */
        .submit-button {
            background: linear-gradient(180deg, #ffffff 0%, #f8f9fa 20%, #e9ecef 80%, #dee2e6 100%);
            border: 1px solid #e8e8e8;
            color: #333333;
            box-shadow: 0 0 0 5px #1a1a1a;
            transition: box-shadow 0.4s ease-in-out, background 0.5s ease, border 0.5s ease, color 0.5s ease;
            cursor: pointer;
            font-weight: 500;
            margin: 6px 0;
            display: flex;
            align-items: center;
            justify-content: center;
            height: 48px;
            min-height: 48px;
            position: relative;
        }
        
        .submit-button:hover {
            background: linear-gradient(180deg, #ffffff 0%, #fdfdfe 20%, #f1f3f4 80%, #e9ecef 100%);
            border: 1px solid #e0e0e0;
            box-shadow: 0 0 0 5px #404040;
        }
        
        .submit-button:active {
            background: linear-gradient(180deg, #f1f3f4 0%, #e9ecef 20%, #dee2e6 80%, #ced4da 100%);
            border: 1px solid #d8d8d8;
            box-shadow: 0 0 0 5px #1a1a1a;
            transform: none;
        }
        
        .submit-button:focus {
            outline: none;
        }
        
        /* Error state for labels */
        .label-error {
            color: #ef4444 !important;
            animation: shake 0.5s cubic-bezier(0.36, 0.07, 0.19, 0.97) both;
            transition: color 0.5s ease;
        }
        
        @keyframes shake {
            10%, 90% {
                transform: translateX(-2px);
            }
            20%, 80% {
                transform: translateX(4px);
            }
            30%, 50%, 70% {
                transform: translateX(-6px);
            }
            40%, 60% {
                transform: translateX(6px);
            }
        }
        
        /* Selected option styling */
        #energia-mes.has-value {
            color: white !important;
        }
        
        /* Spinning loader */
        .spinner {
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-top: 2px solid #333333;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            animation: spin 0.8s linear infinite;
            display: inline-block;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        /* Success button state */
        .submit-button.success {
            background: linear-gradient(135deg, #08ddbc 0%, #17ffdb 100%) !important;
            border: 1px solid #08ddbc !important;
            color: white !important;
            box-shadow: 0 0 0 5px #1a1a1a, 0 8px 20px rgba(8, 221, 188, 0.3) !important;
        }
        
        /* Fade animations */
        .fade-out {
            animation: fadeOut 0.5s ease forwards;
        }
        
        .fade-in {
            animation: fadeIn 0.5s ease forwards;
        }
        
        @keyframes fadeOut {
            from { opacity: 1; }
            to { opacity: 0; }
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        /* Success message container */
        .success-message {
            display: none;
            text-align: center;
            padding: 2rem;
            transition: opacity 0.6s ease;
        }
        
        .success-message.show {
            display: block;
        }
        
        .success-checkmark {
            width: 100px;
            height: auto;
            margin: 0 auto 1.5rem;
            object-fit: contain;
        }
        
        /* Container transition animation */
        .form-container {
            transition: height 0.8s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
        }
        
        /* Hero Animation - same as index.html header */
        @keyframes heroFadeInUp {
            0% {
                opacity: 0;
                transform: translate3d(0, 30px, 0);
                filter: blur(8px);
            }
            100% {
                opacity: 1;
                transform: translate3d(0, 0, 0);
                filter: blur(0px);
            }
        }
        
        .hero-animate {
            opacity: 0;
            will-change: transform, opacity, filter;
            animation: heroFadeInUp 0.8s cubic-bezier(0.25, 0.46, 0.45, 0.94) forwards;
            transform: translate3d(0, 30px, 0);
            filter: blur(8px);
            backface-visibility: hidden;
        }
        
        .hero-animate-delay-1 {
            animation-delay: 0.2s;
        }
    </style>

    <!-- Paste this right before your closing </head> tag -->
    <script type="text/javascript">
      (function(e,c){if(!c.__SV){var l,h;window.mixpanel=c;c._i=[];c.init=function(q,r,f){function t(d,a){var g=a.split(".");2==g.length&&(d=d[g[0]],a=g[1]);d[a]=function(){d.push([a].concat(Array.prototype.slice.call(arguments,0)))}}var b=c;"undefined"!==typeof f?b=c[f]=[]:f="mixpanel";b.people=b.people||[];b.toString=function(d){var a="mixpanel";"mixpanel"!==f&&(a+="."+f);d||(a+=" (stub)");return a};b.people.toString=function(){return b.toString(1)+".people (stub)"};l="disable time_event track track_pageview track_links track_forms track_with_groups add_group set_group remove_group register register_once alias unregister identify name_tag set_config reset opt_in_tracking opt_out_tracking has_opted_in_tracking has_opted_out_tracking clear_opt_in_out_tracking start_batch_senders start_session_recording stop_session_recording people.set people.set_once people.unset people.increment people.append people.union people.track_charge people.clear_charges people.delete_user people.remove".split(" ");
      for(h=0;h<l.length;h++)t(b,l[h]);var n="set set_once union unset remove delete".split(" ");b.get_group=function(){function d(p){a[p]=function(){b.push([g,[p].concat(Array.prototype.slice.call(arguments,0))])}}for(var a={},g=["get_group"].concat(Array.prototype.slice.call(arguments,0)),m=0;m<n.length;m++)d(n[m]);return a};c._i.push([q,r,f])};c.__SV=1.2;var k=e.createElement("script");k.type="text/javascript";k.async=!0;k.src="undefined"!==typeof MIXPANEL_CUSTOM_LIB_URL?MIXPANEL_CUSTOM_LIB_URL:"file:"===
      e.location.protocol&&"//cdn.mxpnl.com/libs/mixpanel-2-latest.min.js".match(/^\/\//)?"https://cdn.mxpnl.com/libs/mixpanel-2-latest.min.js":"//cdn.mxpnl.com/libs/mixpanel-2-latest.min.js";e=e.getElementsByTagName("script")[0];e.parentNode.insertBefore(k,e)}})(document,window.mixpanel||[])
      
      mixpanel.init('23d252a965fe9917e5ce3016e69988e2', {
        autocapture: true,
        record_sessions_percent: 100,
      })

    </script>
</head>
<body class="bg-black text-white">
    <!-- Sticky Logo at Top Left -->
    <div class="sticky-logo">
        <a href="index.html" class="inline-block hover:opacity-80 transition-opacity">
            <img src="assets/logos/bia-logo.png" alt="Bia" class="h-6 w-auto">
        </a>
    </div>
    
    <!-- Full Page Container with Background -->
    <div class="min-h-screen relative overflow-hidden">
        <!-- Background Image -->
        <div class="absolute inset-0 z-0" style="background-image: url('assets/images/backgrounds/background-mid.jpg'); background-size: cover; background-position: center; background-repeat: no-repeat;"></div>
        
        <!-- Dark overlay -->
        <div class="absolute inset-0 z-0 bg-black/60"></div>
        
        <!-- Content Grid -->
        <div class="relative z-10 min-h-screen flex flex-col lg:flex-row lg:justify-center lg:items-center gap-8 lg:gap-[100px] p-4 sm:p-6 lg:p-12 lg:max-w-[1400px] lg:mx-auto">
            
            <!-- Left Side - Branding (hidden on mobile/tablet, visible on desktop) -->
            <div class="hidden lg:flex flex-col justify-center lg:w-auto lg:max-w-md flex-shrink-0 space-y-8 lg:space-y-12">
                
                <!-- Title and Description -->
                <div class="space-y-4 max-w-md">
                    <h1 class="text-2xl lg:text-3xl font-bold text-white leading-tight hero-animate">
                        Recibe una oferta comercial a la medida para tu empresa
                    </h1>
                    <p class="text-base text-gray-300 leading-relaxed hero-animate hero-animate-delay-1">
                        Más de 3.500 empresas cambiaron a Bia como su nuevo comercializador de energía
                    </p>
                </div>
                
                <!-- Stacked Review Cards -->
                <div class="reviews-stack max-w-md">
                    <div class="review-card card-0" id="review-0">
                        <p class="text-gray-200 text-sm leading-relaxed mb-4" id="review-text-0"></p>
                        <div class="text-sm">
                            <div class="text-white font-medium" id="review-name-0"></div>
                            <div class="text-gray-400 text-xs mt-1" id="review-company-0"></div>
                        </div>
                    </div>
                    <div class="review-card card-1" id="review-1">
                        <p class="text-gray-200 text-sm leading-relaxed mb-4" id="review-text-1"></p>
                        <div class="text-sm">
                            <div class="text-white font-medium" id="review-name-1"></div>
                            <div class="text-gray-400 text-xs mt-1" id="review-company-1"></div>
                        </div>
                    </div>
                    <div class="review-card card-2" id="review-2">
                        <p class="text-gray-200 text-sm leading-relaxed mb-4" id="review-text-2"></p>
                        <div class="text-sm">
                            <div class="text-white font-medium" id="review-name-2"></div>
                            <div class="text-gray-400 text-xs mt-1" id="review-company-2"></div>
                        </div>
                    </div>
                </div>
                
                <!-- Companies Title and Animated Logos -->
                <div class="max-w-md">
                    <p class="company-subtitle">Empresas líderes que ya confían en nosotros</p>
                    
                <!-- Animated Logos -->
                <div class="logo-container">
                    <div class="logo-scroll">
                        <!-- Set 1 -->
                        <div class="logo-item"><img src="assets/logos/header/6602338a31da6ef3751517b8_Rappi.png" alt="Rappi"></div>
                        <div class="logo-item"><img src="assets/logos/header/Falabella.svg.png" alt="Falabella"></div>
                        <div class="logo-item"><img src="assets/logos/header/6602338a31da6ef3751517bf_Click Clack.png" alt="Click Clack"></div>
                        <div class="logo-item"><img src="assets/logos/header/Farmatodo_logo.svg.png" alt="Farmatodo"></div>
                        <div class="logo-item"><img src="assets/logos/header/Grupo_Nutresa-Logo.wine.png" alt="Nutresa"></div>
                        <div class="logo-item"><img src="assets/logos/header/Terpel.png" alt="Terpel"></div>
                        <div class="logo-item"><img src="assets/logos/header/6602338a31da6ef3751517bd_PlasticosMonaco.png" alt="Plasticos Monaco"></div>
                        <div class="logo-item"><img src="assets/logos/header/Clip path group.png" alt="Sunshine Bouquet"></div>
                        <div class="logo-item"><img src="assets/logos/header/Clip path group-1.png" alt="WeWork"></div>
                        <div class="logo-item"><img src="assets/logos/header/Clip path group-2.png" alt="Domino's"></div>
                        
                        <!-- Set 2 (duplicate for seamless loop) -->
                        <div class="logo-item"><img src="assets/logos/header/6602338a31da6ef3751517b8_Rappi.png" alt="Rappi"></div>
                        <div class="logo-item"><img src="assets/logos/header/Falabella.svg.png" alt="Falabella"></div>
                        <div class="logo-item"><img src="assets/logos/header/6602338a31da6ef3751517bf_Click Clack.png" alt="Click Clack"></div>
                        <div class="logo-item"><img src="assets/logos/header/Farmatodo_logo.svg.png" alt="Farmatodo"></div>
                        <div class="logo-item"><img src="assets/logos/header/Grupo_Nutresa-Logo.wine.png" alt="Nutresa"></div>
                        <div class="logo-item"><img src="assets/logos/header/Terpel.png" alt="Terpel"></div>
                        <div class="logo-item"><img src="assets/logos/header/6602338a31da6ef3751517bd_PlasticosMonaco.png" alt="Plasticos Monaco"></div>
                        <div class="logo-item"><img src="assets/logos/header/Clip path group.png" alt="Sunshine Bouquet"></div>
                        <div class="logo-item"><img src="assets/logos/header/Clip path group-1.png" alt="WeWork"></div>
                        <div class="logo-item"><img src="assets/logos/header/Clip path group-2.png" alt="Domino's"></div>
                        
                        <!-- Set 3 -->
                        <div class="logo-item"><img src="assets/logos/header/6602338a31da6ef3751517b8_Rappi.png" alt="Rappi"></div>
                        <div class="logo-item"><img src="assets/logos/header/Falabella.svg.png" alt="Falabella"></div>
                        <div class="logo-item"><img src="assets/logos/header/6602338a31da6ef3751517bf_Click Clack.png" alt="Click Clack"></div>
                        <div class="logo-item"><img src="assets/logos/header/Farmatodo_logo.svg.png" alt="Farmatodo"></div>
                        <div class="logo-item"><img src="assets/logos/header/Grupo_Nutresa-Logo.wine.png" alt="Nutresa"></div>
                        <div class="logo-item"><img src="assets/logos/header/Terpel.png" alt="Terpel"></div>
                        <div class="logo-item"><img src="assets/logos/header/6602338a31da6ef3751517bd_PlasticosMonaco.png" alt="Plasticos Monaco"></div>
                        <div class="logo-item"><img src="assets/logos/header/Clip path group.png" alt="Sunshine Bouquet"></div>
                        <div class="logo-item"><img src="assets/logos/header/Clip path group-1.png" alt="WeWork"></div>
                        <div class="logo-item"><img src="assets/logos/header/Clip path group-2.png" alt="Domino's"></div>
                        
                        <!-- Set 4 -->
                        <div class="logo-item"><img src="assets/logos/header/6602338a31da6ef3751517b8_Rappi.png" alt="Rappi"></div>
                        <div class="logo-item"><img src="assets/logos/header/Falabella.svg.png" alt="Falabella"></div>
                        <div class="logo-item"><img src="assets/logos/header/6602338a31da6ef3751517bf_Click Clack.png" alt="Click Clack"></div>
                        <div class="logo-item"><img src="assets/logos/header/Farmatodo_logo.svg.png" alt="Farmatodo"></div>
                        <div class="logo-item"><img src="assets/logos/header/Grupo_Nutresa-Logo.wine.png" alt="Nutresa"></div>
                        <div class="logo-item"><img src="assets/logos/header/Terpel.png" alt="Terpel"></div>
                        <div class="logo-item"><img src="assets/logos/header/6602338a31da6ef3751517bd_PlasticosMonaco.png" alt="Plasticos Monaco"></div>
                        <div class="logo-item"><img src="assets/logos/header/Clip path group.png" alt="Sunshine Bouquet"></div>
                        <div class="logo-item"><img src="assets/logos/header/Clip path group-1.png" alt="WeWork"></div>
                        <div class="logo-item"><img src="assets/logos/header/Clip path group-2.png" alt="Domino's"></div>
                        
                        <!-- Set 5 -->
                        <div class="logo-item"><img src="assets/logos/header/6602338a31da6ef3751517b8_Rappi.png" alt="Rappi"></div>
                        <div class="logo-item"><img src="assets/logos/header/Falabella.svg.png" alt="Falabella"></div>
                        <div class="logo-item"><img src="assets/logos/header/6602338a31da6ef3751517bf_Click Clack.png" alt="Click Clack"></div>
                        <div class="logo-item"><img src="assets/logos/header/Farmatodo_logo.svg.png" alt="Farmatodo"></div>
                        <div class="logo-item"><img src="assets/logos/header/Grupo_Nutresa-Logo.wine.png" alt="Nutresa"></div>
                        <div class="logo-item"><img src="assets/logos/header/Terpel.png" alt="Terpel"></div>
                        <div class="logo-item"><img src="assets/logos/header/6602338a31da6ef3751517bd_PlasticosMonaco.png" alt="Plasticos Monaco"></div>
                        <div class="logo-item"><img src="assets/logos/header/Clip path group.png" alt="Sunshine Bouquet"></div>
                        <div class="logo-item"><img src="assets/logos/header/Clip path group-1.png" alt="WeWork"></div>
                        <div class="logo-item"><img src="assets/logos/header/Clip path group-2.png" alt="Domino's"></div>
                    </div>
                </div>
                </div>
            </div>
            <!-- End Left Side -->
            
            <!-- Right Side - Contact Form (full width on mobile/tablet, right on desktop) -->
            <div class="flex flex-col items-center justify-center flex-1 lg:flex-none lg:w-auto space-y-6 lg:space-y-0 flex-shrink-0">
                
                <!-- Mobile/Tablet Only Title (visible only on mobile/tablet) -->
                <div class="lg:hidden w-full max-w-md text-center px-4 pt-20">
                    <h1 class="text-2xl sm:text-3xl font-bold text-white leading-tight hero-animate">
                        Recibe una oferta comercial a la medida para tu empresa
                    </h1>
                </div>
                
                <div id="form-container" class="w-full max-w-md glassmorphism rounded-xl sm:rounded-2xl p-5 sm:p-8 lg:p-12 form-container">
                    <form id="contact-form" class="space-y-4 sm:space-y-6" novalidate>
                        <!-- Primer Nombre y Apellidos -->
                        <div class="flex gap-2">
                            <!-- Primer Nombre -->
                            <div class="flex flex-col gap-1 flex-1">
                                <label id="label-primer-nombre" class="text-gray-300 text-[14px] font-normal leading-[20px]">Primer Nombre *</label>
                                <div class="bg-[#080d12] border border-[#1d1e28] rounded-xl px-3 py-2.5 h-[42px] flex items-center w-full focus-within:border-[#6d7193] focus-within:shadow-[0px_0px_0px_2px_rgba(182,185,211,0.2)] transition-all duration-200">
                                    <input type="text" id="primer-nombre" placeholder="Carlos" class="w-full bg-transparent text-white placeholder-[#4a4d5a] text-[14px] font-normal leading-[20px] focus:outline-none focus:placeholder-[#a1a3b9]" autofocus required>
                                </div>
                            </div>
                            
                            <!-- Apellido -->
                            <div class="flex flex-col gap-1 flex-1">
                                <label id="label-apellidos" class="text-gray-300 text-[14px] font-normal leading-[20px]">Apellido *</label>
                                <div class="bg-[#080d12] border border-[#1d1e28] rounded-xl px-3 py-2.5 h-[42px] flex items-center w-full focus-within:border-[#6d7193] focus-within:shadow-[0px_0px_0px_2px_rgba(182,185,211,0.2)] transition-all duration-200">
                                    <input type="text" id="apellidos" placeholder="Rodriguez" class="w-full bg-transparent text-white placeholder-[#4a4d5a] text-[14px] font-normal leading-[20px] focus:outline-none focus:placeholder-[#a1a3b9]" required>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Nombre de empresa -->
                        <div class="flex flex-col gap-1">
                            <label id="label-nombre-empresa" class="text-gray-300 text-[14px] font-normal leading-[20px]">Nombre de empresa *</label>
                            <div class="bg-[#080d12] border border-[#1d1e28] rounded-xl px-3 py-2.5 h-[42px] flex items-center w-full focus-within:border-[#6d7193] focus-within:shadow-[0px_0px_0px_2px_rgba(182,185,211,0.2)] transition-all duration-200">
                                <input type="text" id="nombre-empresa" placeholder="Mi Empresa S.A.S." class="w-full bg-transparent text-white placeholder-[#4a4d5a] text-[14px] font-normal leading-[20px] focus:outline-none focus:placeholder-[#a1a3b9]" required>
                            </div>
                        </div>
                        
                        <!-- Email de trabajo -->
                        <div class="flex flex-col gap-1">
                            <label id="label-email-trabajo" class="text-gray-300 text-[14px] font-normal leading-[20px]">Email de trabajo *</label>
                            <div class="bg-[#080d12] border border-[#1d1e28] rounded-xl px-3 py-2.5 h-[42px] flex items-center w-full focus-within:border-[#6d7193] focus-within:shadow-[0px_0px_0px_2px_rgba(182,185,211,0.2)] transition-all duration-200">
                                <input type="email" id="email-trabajo" placeholder="carlos@empresa.com" class="w-full bg-transparent text-white placeholder-[#4a4d5a] text-[14px] font-normal leading-[20px] focus:outline-none focus:placeholder-[#a1a3b9]" required>
                            </div>
                        </div>
                        
                        <!-- Celular -->
                        <div class="flex flex-col gap-1">
                            <label id="label-celular" class="text-gray-300 text-[14px] font-normal leading-[20px]">Celular *</label>
                            <div class="bg-[#080d12] border border-[#1d1e28] rounded-xl px-3 py-2.5 h-[42px] flex items-center w-full focus-within:border-[#6d7193] focus-within:shadow-[0px_0px_0px_2px_rgba(182,185,211,0.2)] transition-all duration-200">
                                <span class="text-[#a1a3b9] text-[14px] mr-2">+57</span>
                                <input type="tel" id="celular" placeholder="300 123 4567" class="w-full bg-transparent text-white placeholder-[#4a4d5a] text-[14px] font-normal leading-[20px] focus:outline-none focus:placeholder-[#a1a3b9]" maxlength="12" required>
                            </div>
                        </div>
                        
                        <!-- Energía al mes -->
                        <div class="flex flex-col gap-1">
                            <label id="label-energia-mes" class="text-gray-300 text-[14px] font-normal leading-[20px]">¿Cuánto paga tu empresa en energía al mes? *</label>
                            <div class="bg-[#080d12] border border-[#1d1e28] rounded-xl px-3 py-2.5 h-[42px] flex items-center w-full focus-within:border-[#6d7193] focus-within:shadow-[0px_0px_0px_2px_rgba(182,185,211,0.2)] transition-all duration-200">
                                <select id="energia-mes" class="w-full bg-transparent text-[#4a4d5a] text-[14px] font-normal leading-[20px] focus:outline-none appearance-none cursor-pointer" required>
                                    <option value="" class="bg-[#080d12] text-[#4d4d5a]">Seleccionar</option>
                                    <option value="0-5" class="bg-[#080d12] text-white">Menos de $5 millones</option>
                                    <option value="5-15" class="bg-[#080d12] text-white">$5 – $15 millones</option>
                                    <option value="15-50" class="bg-[#080d12] text-white">$15 – $50 millones</option>
                                    <option value="50-100" class="bg-[#080d12] text-white">$50 – $100 millones</option>
                                    <option value="100+" class="bg-[#080d12] text-white">Más de $100 millones</option>
                                </select>
                                <!-- Dropdown arrow -->
                                <svg class="w-4 h-4 text-[#4a4d5a] ml-3 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                                </svg>
                            </div>
                        </div>
                        
                        <button type="submit" id="submit-button" class="submit-button w-full rounded-[12px] px-6 py-3 font-medium">
                            Enviar solicitud
                        </button>
                        
                        <!-- Terms and conditions disclaimer -->
                        <p class="text-center text-xs text-gray-500 mt-4">
                            Al enviar la solicitud, aceptas nuestra <a href="https://www.bia.app/assets/web/ems/POLI%CC%81TICA+de+PDP_BIA+ENERGY_09022024.pdf" target="_blank" rel="noopener noreferrer" class="text-[#a1a3b9] hover:text-white underline transition-colors">política de tratamiento de datos</a>
                        </p>
                    </form>
                    
                    <!-- Success Message (hidden by default) -->
                    <div id="success-message" class="success-message">
                        <img src="assets/images/checkmark.png" alt="Success" class="success-checkmark">
                        <h2 id="success-title" class="text-2xl font-bold text-white mb-2"></h2>
                        <p id="success-description" class="text-gray-400 text-sm"></p>
                    </div>
                </div>
                
                <!-- Mobile/Tablet Only Logo Carousel (visible only on mobile/tablet) -->
                <div class="lg:hidden w-full max-w-md px-4 pb-12">
                    <p class="text-sm text-gray-400 text-center mb-4 tracking-wide">Empresas líderes que ya confían en nosotros</p>
                    
                    <!-- Animated Logos -->
                    <div class="logo-container">
                        <div class="logo-scroll">
                            <!-- Set 1 -->
                            <div class="logo-item"><img src="assets/logos/header/6602338a31da6ef3751517b8_Rappi.png" alt="Rappi"></div>
                            <div class="logo-item"><img src="assets/logos/header/Falabella.svg.png" alt="Falabella"></div>
                            <div class="logo-item"><img src="assets/logos/header/6602338a31da6ef3751517bf_Click Clack.png" alt="Click Clack"></div>
                            <div class="logo-item"><img src="assets/logos/header/Farmatodo_logo.svg.png" alt="Farmatodo"></div>
                            <div class="logo-item"><img src="assets/logos/header/Grupo_Nutresa-Logo.wine.png" alt="Nutresa"></div>
                            <div class="logo-item"><img src="assets/logos/header/Terpel.png" alt="Terpel"></div>
                            <div class="logo-item"><img src="assets/logos/header/6602338a31da6ef3751517bd_PlasticosMonaco.png" alt="Plasticos Monaco"></div>
                            <div class="logo-item"><img src="assets/logos/header/Clip path group.png" alt="Sunshine Bouquet"></div>
                            <div class="logo-item"><img src="assets/logos/header/Clip path group-1.png" alt="WeWork"></div>
                            <div class="logo-item"><img src="assets/logos/header/Clip path group-2.png" alt="Domino's"></div>
                            
                            <!-- Set 2 -->
                            <div class="logo-item"><img src="assets/logos/header/6602338a31da6ef3751517b8_Rappi.png" alt="Rappi"></div>
                            <div class="logo-item"><img src="assets/logos/header/Falabella.svg.png" alt="Falabella"></div>
                            <div class="logo-item"><img src="assets/logos/header/6602338a31da6ef3751517bf_Click Clack.png" alt="Click Clack"></div>
                            <div class="logo-item"><img src="assets/logos/header/Farmatodo_logo.svg.png" alt="Farmatodo"></div>
                            <div class="logo-item"><img src="assets/logos/header/Grupo_Nutresa-Logo.wine.png" alt="Nutresa"></div>
                            <div class="logo-item"><img src="assets/logos/header/Terpel.png" alt="Terpel"></div>
                            <div class="logo-item"><img src="assets/logos/header/6602338a31da6ef3751517bd_PlasticosMonaco.png" alt="Plasticos Monaco"></div>
                            <div class="logo-item"><img src="assets/logos/header/Clip path group.png" alt="Sunshine Bouquet"></div>
                            <div class="logo-item"><img src="assets/logos/header/Clip path group-1.png" alt="WeWork"></div>
                            <div class="logo-item"><img src="assets/logos/header/Clip path group-2.png" alt="Domino's"></div>
                            
                            <!-- Set 3 -->
                            <div class="logo-item"><img src="assets/logos/header/6602338a31da6ef3751517b8_Rappi.png" alt="Rappi"></div>
                            <div class="logo-item"><img src="assets/logos/header/Falabella.svg.png" alt="Falabella"></div>
                            <div class="logo-item"><img src="assets/logos/header/6602338a31da6ef3751517bf_Click Clack.png" alt="Click Clack"></div>
                            <div class="logo-item"><img src="assets/logos/header/Farmatodo_logo.svg.png" alt="Farmatodo"></div>
                            <div class="logo-item"><img src="assets/logos/header/Grupo_Nutresa-Logo.wine.png" alt="Nutresa"></div>
                            <div class="logo-item"><img src="assets/logos/header/Terpel.png" alt="Terpel"></div>
                            <div class="logo-item"><img src="assets/logos/header/6602338a31da6ef3751517bd_PlasticosMonaco.png" alt="Plasticos Monaco"></div>
                            <div class="logo-item"><img src="assets/logos/header/Clip path group.png" alt="Sunshine Bouquet"></div>
                            <div class="logo-item"><img src="assets/logos/header/Clip path group-1.png" alt="WeWork"></div>
                            <div class="logo-item"><img src="assets/logos/header/Clip path group-2.png" alt="Domino's"></div>
                            
                            <!-- Set 4 -->
                            <div class="logo-item"><img src="assets/logos/header/6602338a31da6ef3751517b8_Rappi.png" alt="Rappi"></div>
                            <div class="logo-item"><img src="assets/logos/header/Falabella.svg.png" alt="Falabella"></div>
                            <div class="logo-item"><img src="assets/logos/header/6602338a31da6ef3751517bf_Click Clack.png" alt="Click Clack"></div>
                            <div class="logo-item"><img src="assets/logos/header/Farmatodo_logo.svg.png" alt="Farmatodo"></div>
                            <div class="logo-item"><img src="assets/logos/header/Grupo_Nutresa-Logo.wine.png" alt="Nutresa"></div>
                            <div class="logo-item"><img src="assets/logos/header/Terpel.png" alt="Terpel"></div>
                            <div class="logo-item"><img src="assets/logos/header/6602338a31da6ef3751517bd_PlasticosMonaco.png" alt="Plasticos Monaco"></div>
                            <div class="logo-item"><img src="assets/logos/header/Clip path group.png" alt="Sunshine Bouquet"></div>
                            <div class="logo-item"><img src="assets/logos/header/Clip path group-1.png" alt="WeWork"></div>
                            <div class="logo-item"><img src="assets/logos/header/Clip path group-2.png" alt="Domino's"></div>
                            
                            <!-- Set 5 -->
                            <div class="logo-item"><img src="assets/logos/header/6602338a31da6ef3751517b8_Rappi.png" alt="Rappi"></div>
                            <div class="logo-item"><img src="assets/logos/header/Falabella.svg.png" alt="Falabella"></div>
                            <div class="logo-item"><img src="assets/logos/header/6602338a31da6ef3751517bf_Click Clack.png" alt="Click Clack"></div>
                            <div class="logo-item"><img src="assets/logos/header/Farmatodo_logo.svg.png" alt="Farmatodo"></div>
                            <div class="logo-item"><img src="assets/logos/header/Grupo_Nutresa-Logo.wine.png" alt="Nutresa"></div>
                            <div class="logo-item"><img src="assets/logos/header/Terpel.png" alt="Terpel"></div>
                            <div class="logo-item"><img src="assets/logos/header/6602338a31da6ef3751517bd_PlasticosMonaco.png" alt="Plasticos Monaco"></div>
                            <div class="logo-item"><img src="assets/logos/header/Clip path group.png" alt="Sunshine Bouquet"></div>
                            <div class="logo-item"><img src="assets/logos/header/Clip path group-1.png" alt="WeWork"></div>
                            <div class="logo-item"><img src="assets/logos/header/Clip path group-2.png" alt="Domino's"></div>
                        </div>
                    </div>
                </div>
                
            </div>
            <!-- End Left Side -->
            
        </div>
    </div>
    
    <script>
        // UTM Parameter Tracking
        (function() {
            // Function to get URL parameters
            function getURLParameter(name) {
                const urlParams = new URLSearchParams(window.location.search);
                return urlParams.get(name);
            }
            
            // Function to save UTM parameters to localStorage
            function saveUTMParameters() {
                const utmParams = {
                    utm_source: getURLParameter('utm_source'),
                    utm_medium: getURLParameter('utm_medium'),
                    utm_campaign: getURLParameter('utm_campaign'),
                    utm_term: getURLParameter('utm_term'),
                    utm_content: getURLParameter('utm_content')
                };
                
                // Check if any UTM parameter exists
                const hasUTM = Object.values(utmParams).some(val => val !== null);
                
                if (hasUTM) {
                    // Add timestamp for expiration (7 days)
                    const expirationDate = new Date();
                    expirationDate.setDate(expirationDate.getDate() + 7);
                    
                    const utmData = {
                        params: utmParams,
                        expiration: expirationDate.getTime()
                    };
                    
                    localStorage.setItem('bia_utm_data', JSON.stringify(utmData));
                    console.log('UTM parameters saved:', utmParams);
                }
            }
            
            // Function to get stored UTM parameters
            window.getStoredUTM = function() {
                try {
                    const storedData = localStorage.getItem('bia_utm_data');
                    if (!storedData) return {};
                    
                    const utmData = JSON.parse(storedData);
                    
                    // Check if data has expired
                    if (new Date().getTime() > utmData.expiration) {
                        localStorage.removeItem('bia_utm_data');
                        return {};
                    }
                    
                    return utmData.params;
                } catch (e) {
                    console.error('Error reading UTM data:', e);
                    return {};
                }
            };
            
            // Save UTM parameters when page loads
            saveUTMParameters();
        })();
        
        // Disable autofocus on mobile devices
        document.addEventListener('DOMContentLoaded', function() {
            const isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent) || 
                            window.innerWidth < 1024 || 
                            ('ontouchstart' in window);
            
            const nombreInput = document.getElementById('primer-nombre');
            if (nombreInput && isMobile) {
                nombreInput.removeAttribute('autofocus');
                nombreInput.blur();
                // Also prevent focus on click if it was accidentally focused
                setTimeout(() => {
                    if (document.activeElement === nombreInput) {
                        nombreInput.blur();
                    }
                }, 100);
            }
        });
        
        // Base testimonial data - will be shuffled on load (filtered to show only 2-line reviews)
        const baseTestimonials = [
            {
                text: "Bia nos permitió obtener un ahorro significativo en nuestros gastos de energía.",
                name: "Monica Llanos",
                company: "OFC SAS"
            },
            {
                text: "Bia nos ayudó a ser más rentables y a tener un diálogo directo con la compañía.",
                name: "Paulo Rueda",
                company: "Colorplastic"
            },
            {
                text: "Uno progresivamente puede ver qué pasa día a día y optimizar mejor su consumo.",
                name: "Paulo Rueda",
                company: "Colorplastic"
            },
            {
                text: "Bia nos muestra dónde están las oportunidades de mejora en nuestro consumo.",
                name: "Camilo Peláez",
                company: "Home Burgers"
            },
            {
                text: "Bia trae una nueva forma de poder acceder a la energía usando la tecnología.",
                name: "Matías Laks",
                company: "Rappi"
            },
            {
                text: "El servicio de Bia y la manera en que hicimos el cambio fueron excelentes, transparentes y simples.",
                name: "Carolina Buitrago",
                company: "Keep & Go"
            },
            {
                text: "En menos de dos meses identificamos mejoras en nuestros costos energéticos.",
                name: "Carolina Buitrago",
                company: "Keep & Go"
            },
            {
                text: "No sabíamos que nos podíamos cambiar, y el cambio de comercializador fue muy sencillo.",
                name: "Miguel Solanilla",
                company: "Click Clack"
            },
            {
                text: "La facilidad de pago es esencial; tenemos nuestros pagos automatizados con tarjeta.",
                name: "Miguel Solanilla",
                company: "Click Clack"
            },
            {
                text: "Decidimos cambiar de comercializador hace cuatro meses y estamos muy contentos.",
                name: "Juan Aristizábal",
                company: "Fayco"
            }
        ];
        
        // Shuffle the base testimonials randomly
        function shuffleArray(array) {
            const shuffled = [...array];
            for (let i = shuffled.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
            }
            return shuffled;
        }

        // Filter and shuffle testimonials once on page load
        let testimonials = [];
        let currentIndex = 0;
        
        // Filter and shuffle testimonials (only those with 2-line content)
        function selectRandomTestimonials() {
            // Filter testimonials that render as approximately 2 lines (70-110 characters)
            const filtered = baseTestimonials.filter(t => t.text.length >= 70 && t.text.length <= 110);
            // Shuffle filtered testimonials once
            testimonials = shuffleArray(filtered);
        }
        
        // Initialize reviews
        function initReviews() {
            selectRandomTestimonials();
            for (let i = 0; i < 3; i++) {
                const index = i % testimonials.length;
                updateReviewCard(i, testimonials[index]);
            }
        }
        
        // Update a review card with data
        function updateReviewCard(cardIndex, data) {
            document.getElementById(`review-text-${cardIndex}`).textContent = data.text;
            document.getElementById(`review-name-${cardIndex}`).textContent = data.name;
            document.getElementById(`review-company-${cardIndex}`).textContent = data.company;
        }
        
        // Rotate reviews with smooth animation
        function rotateReviews() {
            // Get the container and all cards in current DOM order
            const container = document.querySelector('.reviews-stack');
            const cards = Array.from(container.children);
            
            if (cards.length !== 3) return;
            
            // The first card in DOM is always the top visible one
            const topCard = cards[0];
            const middleCard = cards[1];
            const bottomCard = cards[2];
            
            // Add exiting animation to top card
            topCard.classList.add('exiting');
            
            setTimeout(() => {
                // Move to next review index
                currentIndex = (currentIndex + 1) % testimonials.length;
                
                // Update classes for new positions
                topCard.classList.remove('card-0', 'card-1', 'card-2', 'exiting');
                topCard.classList.add('card-2');
                
                middleCard.classList.remove('card-0', 'card-1', 'card-2');
                middleCard.classList.add('card-0');
                
                bottomCard.classList.remove('card-0', 'card-1', 'card-2');
                bottomCard.classList.add('card-1');
                
                // Update content of the card that moved to the back with next review
                const nextReviewIndex = (currentIndex + 2) % testimonials.length;
                const cardId = topCard.id.split('-')[1]; // Extract number from id
                updateReviewCard(cardId, testimonials[nextReviewIndex]);
                
                // Move top card to the end of the DOM (becomes the back card visually)
                container.appendChild(topCard);
                
            }, 300);
        }
        
        // Initialize on page load
        initReviews();
        
        // Auto-rotate every 8 seconds
        setInterval(rotateReviews, 8000);
        
        // Phone number formatting
        const celularInput = document.getElementById('celular');
        celularInput.addEventListener('input', function(e) {
            // Remove all non-digit characters
            let value = e.target.value.replace(/\D/g, '');
            
            // Limit to 10 digits
            value = value.substring(0, 10);
            
            // Format as XXX XXX XXXX
            let formatted = '';
            if (value.length > 0) {
                formatted = value.substring(0, 3);
            }
            if (value.length >= 4) {
                formatted += ' ' + value.substring(3, 6);
            }
            if (value.length >= 7) {
                formatted += ' ' + value.substring(6, 10);
            }
            
            e.target.value = formatted;
        });
        
        // Dropdown selection - turn text white when option selected
        const energiaMesSelect = document.getElementById('energia-mes');
        energiaMesSelect.addEventListener('change', function() {
            if (this.value) {
                this.classList.add('has-value');
            } else {
                this.classList.remove('has-value');
            }
        });
        
        // Form validation and submission handler
        document.getElementById('contact-form').addEventListener('submit', function(e) {
            e.preventDefault();
            
            // Get all fields
            const fields = [
                { id: 'primer-nombre', labelId: 'label-primer-nombre' },
                { id: 'apellidos', labelId: 'label-apellidos' },
                { id: 'nombre-empresa', labelId: 'label-nombre-empresa' },
                { id: 'email-trabajo', labelId: 'label-email-trabajo' },
                { id: 'celular', labelId: 'label-celular' },
                { id: 'energia-mes', labelId: 'label-energia-mes' }
            ];
            
            let hasErrors = false;
            
            // Validate each field
            fields.forEach(field => {
                const input = document.getElementById(field.id);
                const label = document.getElementById(field.labelId);
                
                if (!input.value || input.value.trim() === '') {
                    // Add error styling
                    label.classList.add('label-error');
                    hasErrors = true;
                    
                    // Automatically fade back to normal color after 2 seconds
                    setTimeout(() => {
                        label.classList.remove('label-error');
                    }, 2000);
                    
                    // Also remove error when user focuses on the field
                    input.addEventListener('focus', function() {
                        label.classList.remove('label-error');
                    }, { once: true });
                }
            });
            
            // If there are errors, don't submit
            if (hasErrors) {
                return;
            }
            
            // Validate email format
            const emailInput = document.getElementById('email-trabajo');
            const emailValue = emailInput.value.trim();
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            
            if (!emailRegex.test(emailValue)) {
                const emailLabel = document.getElementById('label-email-trabajo');
                emailLabel.classList.add('label-error');
                
                // Automatically fade back to normal color after 2 seconds
                setTimeout(() => {
                    emailLabel.classList.remove('label-error');
                }, 2000);
                
                emailInput.addEventListener('focus', function() {
                    emailLabel.classList.remove('label-error');
                }, { once: true });
                return;
            }
            
            // Validate phone number has 10 digits
            const celularValue = celularInput.value.replace(/\D/g, '');
            if (celularValue.length !== 10) {
                const celularLabel = document.getElementById('label-celular');
                celularLabel.classList.add('label-error');
                
                // Automatically fade back to normal color after 2 seconds
                setTimeout(() => {
                    celularLabel.classList.remove('label-error');
                }, 2000);
                
                celularInput.addEventListener('focus', function() {
                    celularLabel.classList.remove('label-error');
                }, { once: true });
                return;
            }
            
            // All validations passed - start animation sequence
            const button = document.getElementById('submit-button');
            const primerNombre = document.getElementById('primer-nombre').value;
            const apellidos = document.getElementById('apellidos').value;
            const emailTrabajo = document.getElementById('email-trabajo').value;
            const firstName = primerNombre; // Use primer nombre directly
            
            button.disabled = true;
            
            // Step 1: Fade out text and show spinner (2 seconds)
            button.innerHTML = '<div class="spinner"></div>';
            
            // Send data to Google Sheets
            const formData = {
                primerNombre: primerNombre,
                apellidos: apellidos,
                nombreEmpresa: document.getElementById('nombre-empresa').value,
                emailTrabajo: document.getElementById('email-trabajo').value,
                celular: document.getElementById('celular').value,
                energiaMes: document.getElementById('energia-mes').value
            };

            // Get stored UTM parameters
            const utmData = window.getStoredUTM();
            
            console.log('Sending data to Google Sheets:', formData);
            console.log('UTM parameters:', utmData);

            // Use FormData instead of JSON for better compatibility
            const form = new FormData();
            form.append('primerNombre', formData.primerNombre);
            form.append('apellidos', formData.apellidos);
            form.append('nombreEmpresa', formData.nombreEmpresa);
            form.append('emailTrabajo', formData.emailTrabajo);
            form.append('celular', formData.celular);
            form.append('energiaMes', formData.energiaMes);
            
            // Append UTM parameters
            form.append('utm_source', utmData.utm_source || '');
            form.append('utm_medium', utmData.utm_medium || '');
            form.append('utm_campaign', utmData.utm_campaign || '');
            form.append('utm_term', utmData.utm_term || '');
            form.append('utm_content', utmData.utm_content || '');

            fetch('https://script.google.com/macros/s/AKfycbzn8nXZyGEmW_xP_kOvWhln2uy9ffNGQDWDSNrgR8Mx8uKdCyvaf26u_06Ft7B-WnuF9g/exec', {
                method: 'POST',
                body: form
            })
            .then(response => {
                console.log('Google Sheets response status:', response.status);
                return response.text();
            })
            .then(data => {
                console.log('Google Sheets response data:', data);
            })
            .catch(error => {
                console.error('Error sending to Google Sheets:', error);
                // Continue with animation even if there's an error
            });
            
            // Send data to HubSpot
            const energiaSelect = document.getElementById('energia-mes');
            const energiaText = energiaSelect.options[energiaSelect.selectedIndex].text;
            
            const hubspotData = {
                fields: [
                    {
                        objectTypeId: "0-1",
                        name: "firstname",
                        value: formData.primerNombre
                    },
                    {
                        objectTypeId: "0-1",
                        name: "lastname",
                        value: formData.apellidos
                    },
                    {
                        objectTypeId: "0-1",
                        name: "email",
                        value: formData.emailTrabajo
                    },
                    {
                        objectTypeId: "0-1",
                        name: "mobilephone",
                        value: formData.celular
                    },
                    {
                        objectTypeId: "0-1",
                        name: "company",
                        value: formData.nombreEmpresa
                    },
                    {
                        objectTypeId: "0-1",
                        name: "estimated_consumption",
                        value: energiaText
                    },
                    {
                        objectTypeId: "0-1",
                        name: "utm_campaign",
                        value: utmData.utm_campaign || ''
                    },
                    {
                        objectTypeId: "0-1",
                        name: "utm_content",
                        value: utmData.utm_content || ''
                    },
                    {
                        objectTypeId: "0-1",
                        name: "utm_source",
                        value: utmData.utm_source || ''
                    },
                    {
                        objectTypeId: "0-1",
                        name: "utm_medium",
                        value: utmData.utm_medium || ''
                    },
                    {
                        objectTypeId: "0-1",
                        name: "utm_term",
                        value: utmData.utm_term || ''
                    },
                    {
                        objectTypeId: "0-1",
                        name: "tipo_de_contrato",
                        value: "Cliente"
                    },
                    {
                        objectTypeId: "0-1",
                        name: "source",
                        value: "Paid Media"
                    },
                    {
                        objectTypeId: "0-1",
                        name: "sub_source",
                        value: "Performance"
                    }
                ],
                context: {
                    pageUri: window.location.href,
                    pageName: document.title
                }
            };
            
            console.log('Sending data to HubSpot:', hubspotData);
            
            fetch('https://api.hsforms.com/submissions/v3/integration/submit/50445259/ad75f591-5db2-42da-bd9c-b911769b5122', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify(hubspotData)
            })
            .then(response => {
                console.log('HubSpot response status:', response.status);
                return response.json();
            })
            .then(data => {
                console.log('HubSpot response data:', data);
            })
            .catch(error => {
                console.error('Error sending to HubSpot:', error);
                // Continue with animation even if there's an error
            });
            
            setTimeout(() => {
                // Step 2: Change to green with checkmark
                button.classList.add('success');
                button.innerHTML = '<svg class="inline-block w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M5 13l4 4L19 7"></path></svg>';
                
                // Fire confetti from button position
                const rect = button.getBoundingClientRect();
                const x = (rect.left + rect.width / 2) / window.innerWidth;
                const y = (rect.top + rect.height / 2) / window.innerHeight;
                
                confetti({
                    particleCount: 80,
                    spread: 90,
                    origin: { x: x, y: y },
                    colors: ['#08ddbc', '#17ffdb', '#ffffff', '#10b981'],
                    startVelocity: 55,
                    gravity: 2,
                    scalar: 0.7,
                    drift: 0,
                    ticks: 150,
                    decay: 0.92
                });
                
                setTimeout(() => {
                    // Step 3: After 1 second, fade out form and start container transition
                    const form = document.getElementById('contact-form');
                    const container = document.getElementById('form-container');
                    
                    // Get current container height before animation
                    const currentHeight = container.offsetHeight;
                    container.style.height = currentHeight + 'px';
                    
                    form.classList.add('fade-out');
                    
                    setTimeout(() => {
                        // Step 4: Hide form and show success message
                        form.style.display = 'none';
                        
                        const successMessage = document.getElementById('success-message');
                        const successTitle = document.getElementById('success-title');
                        const successDescription = document.getElementById('success-description');
                        
                        successTitle.textContent = `¡Gracias ${firstName}!`;
                        successDescription.textContent = `Te estaremos contactando a ${emailTrabajo} en menos de 24 horas laborales`;
                        
                        // Show success message (hidden first to measure height)
                        successMessage.style.display = 'block';
                        successMessage.style.opacity = '0';
                        
                        // Get success message height
                        const successHeight = successMessage.offsetHeight;
                        
                        // Animate container to new height
                        requestAnimationFrame(() => {
                            container.style.height = (successHeight + 80) + 'px'; // Add padding
                            
                            // Fade in success message after a small delay
                            setTimeout(() => {
                                successMessage.style.opacity = '1';
                                successMessage.classList.add('show');
                            }, 100);
                        });
                    }, 500); // Wait for fade out to complete
                }, 1000); // Keep checkmark for 1 second
            }, 2000); // Spinner for 2 seconds
        });
    </script>

    <!-- Start of HubSpot Embed Code -->
    <!-- <script type="text/javascript" id="hs-script-loader" async defer src="//js.hs-scripts.com/24174374.js"></script> -->
    <!-- End of HubSpot Embed Code -->

    <!-- Amplitude integration -->
    <script type="text/javascript">
    !function(){"use strict";!function(e,t){var r=e.amplitude||{_q:[],_iq:[]};if(r.invoked)e.console&&console.error&&console.error("Amplitude snippet has been loaded.");else{var n=function(e,t){e.prototype[t]=function(){return this._q.push({name:t,args:Array.prototype.slice.call(arguments,0)}),this}},s=function(e,t,r){return function(n){e._q.push({name:t,args:Array.prototype.slice.call(r,0),resolve:n})}},o=function(e,t,r){e[t]=function(){if(r)return{promise:new Promise(s(e,t,Array.prototype.slice.call(arguments)))}}},i=function(e){for(var t=0;t<m.length;t++)o(e,m[t],!1);for(var r=0;r<y.length;r++)o(e,y[r],!0)};r.invoked=!0;var a=t.createElement("script");a.type="text/javascript",a.integrity="sha384-PPfHw98myKtJkA9OdPBMQ6n8yvUaYk0EyUQccFSIQGmB05K6aAMZwvv8z50a5hT2",a.crossOrigin="anonymous",a.async=!0,a.src="https://cdn.amplitude.com/libs/marketing-analytics-browser-0.3.2-min.js.gz",a.onload=function(){e.amplitude.runQueuedFunctions||console.log("[Amplitude] Error: could not load SDK")};var c=t.getElementsByTagName("script")[0];c.parentNode.insertBefore(a,c);for(var u=function(){return this._q=[],this},p=["add","append","clearAll","prepend","set","setOnce","unset","preInsert","postInsert","remove","getUserProperties"],l=0;l<p.length;l++)n(u,p[l]);r.Identify=u;for(var d=function(){return this._q=[],this},v=["getEventProperties","setProductId","setQuantity","setPrice","setRevenue","setRevenueType","setEventProperties"],f=0;f<v.length;f++)n(d,v[f]);r.Revenue=d;var m=["getDeviceId","setDeviceId","getSessionId","setSessionId","getUserId","setUserId","setOptOut","setTransport","reset"],y=["init","add","remove","track","logEvent","identify","groupIdentify","setGroup","revenue","flush"];i(r),r.createInstance=function(){var e=r._iq.push({_q:[]})-1;return i(r._iq[e]),r._iq[e]},e.amplitude=r}}(window,document)}();

    amplitude.init("71cfbdaadb8e89f2fdda85b1e9dc94f5");
    </script>
    <!-- End of Amplitude integration -->

    <!-- Linkedin integration -->
    <script type="text/javascript">
    _linkedin_partner_id = "4573722";
    window._linkedin_data_partner_ids = window._linkedin_data_partner_ids || [];
    window._linkedin_data_partner_ids.push(_linkedin_partner_id);
    </script><script type="text/javascript">
    (function(l) {
    if (!l){window.lintrk = function(a,b){window.lintrk.q.push([a,b])};
    window.lintrk.q=[]}
    var s = document.getElementsByTagName("script")[0];
    var b = document.createElement("script");
    b.type = "text/javascript";b.async = true;
    b.src = "https://snap.licdn.com/li.lms-analytics/insight.min.js";
    s.parentNode.insertBefore(b, s);})(window.lintrk);
    </script>
    <noscript>
    <img height="1" width="1" style="display:none;" alt="" src="https://px.ads.linkedin.com/collect/?pid=4573722&fmt=gif" />
    </noscript>
    <!-- End of Linkedin integration -->
    <!-- Facebook integration -->
    <script>
    	fbq('track', 'PageView');
    </script>
    <!-- End of Facebook integration -->


    <!-- Google Tag Manager (noscript) -->
    <noscript>
    	<iframe src="https://www.googletagmanager.com/ns.html?id=GTM-5XHSZ4JZ"
    		height="0" width="0" style="display:none;visibility:hidden">
      </iframe>
    </noscript>
    <!-- End Google Tag Manager (noscript) -->

    <!-- Google Tag Manager (noscript) -->
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-PJ2GPLW"
    height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager (noscript) -->
</body>
</html>

